<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">
<script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
<script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
</head>
<body>

<div data-role="page">
  <div data-role="header">
    <h1>Whats on your mind!</h1>
  </div>

  <div data-role="main" class="ui-content">
		<input type="text" name="toDoItem" id="toDoItem" data-clear-btn="true">
  	     <button id="addToList" class="ui-btn ui-corner-all">add to list</button>  
  </div>
  <div data-role="content" id="ListDiv">
  	<ul id="List" data-role="listview" data-split-icon="delete" data-split-theme="a"></ul>
  </div>
 
    <p id="doClearAll"><a id="clearAll" href="javascript:void();">Clear All</a></p>
  

  <div data-role="footer">
    <h1></h1>
  </div>
</div> 

<script type="text/javascript">
	$(document).on('pagecreate',function() {
	$.event.special.swipe.horizontalDistanceThreshold = 10; // Swipe horizontal displacement must be more than this.
	$('#List').on('swiperight','li', function(){
    	localStorage.setItem("whatsonyourmind",localStorage.getItem('whatsonyourmind').replace('<li>'+ $(this).text() + '</li>', "")); 
    	//this.replace($(this).text(),'<strike>'+ $(this).text() + '</strike>');
    	//this.addClass('ui-screen-hidden'); 
    	var listitem = $( this );
    	listitem.addClass( "ui-btn-down-d" );
    	this.remove();          
    	$('#List').listview('refresh');
	});
	 //$("li").unbind("swiperight");

     /*$("#page").bind("swipeleft",function(event) {
        $.mobile.changePage('next.html',  {
            transition : "slide"
        });
     });*/
		
		$("#addToList").click(function(e) {
			var inpObj =$('#toDoItem').val();
			console.log("TT" + inpObj);
			//var itemList = '<li><a>'+ inpObj + '</a><a>Delete</a></li>';
			var itemList = '<li>'+ inpObj + '</li>';
			$('#List').append(itemList);
		    $('#List').listview('refresh');
		    if ( localStorage.getItem('whatsonyourmind') ){
			    localStorage.setItem("whatsonyourmind", localStorage.getItem('whatsonyourmind')+itemList);	
		    }else{
		    	localStorage.setItem("whatsonyourmind", itemList);
		    }
		    $('#toDoItem').val("");    
		});
		$("#clearAll").click(function(e) {
			e.preventDefault();
			localStorage.clear();
			location.reload();
		});
		
		//$.event.special.swipe.scrollSupressionThreshold = 10; // More than this horizontal displacement, and we will suppress scrolling.
				//$.event.special.swipe.durationThreshold = 500;  // More time than this, and it isn't a swipe.
		//$.event.special.swipe.verticalDistanceThreshold = 75; // Swipe vertical displacement must be less than this.
		

    	
		/*$("li").bind('swiperight', function(){
        	localStorage.setItem("whatsonyourmind",localStorage.getItem('whatsonyourmind').replace('<li>'+ $(this).text() + '</li>', "")); 
        	this.remove();          
        	$('#List').listview('refresh');
    	});
    	
		$('#List li').on('swiperight', function () {
        	console.log("i am"+$(this).text());
        	//$(this).replaceWith('<li><a href="http://java2s.com/">' + text + '</a></li>')
    	});

		$("a").click(function () {
        	console.log("i am"+$(this).text());
        	//$(this).replaceWith('<li><a href="http://java2s.com/">' + text + '</a></li>')
    	});
        function myFunction() {
		    console.log("i am"+$(this).text());
		}
        */

		$('#List').listview();
		loadToDo();
		function loadToDo() {
		  if ( localStorage.getItem('whatsonyourmind') ) {
		  	$('#List').append(localStorage.getItem('whatsonyourmind'));
		    $('#List').listview('refresh');
		  }
		}
	});
	
	    function myFunction() {
		    console.log("i am"+$(this).text());
		}

	</script>
</body>
</html